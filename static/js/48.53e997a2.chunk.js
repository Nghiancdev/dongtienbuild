(this.webpackJsonpsaha_web=this.webpackJsonpsaha_web||[]).push([[48],{1085:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return g}));var n,s=i(22),r=i(6),c=i(10),l=i(2),o=i(4),u=i(7),a=i(1),d=i(831),b=i(11),_=i(0),m=b.a.div(n||(n=Object(c.a)(["\n  margin-top: 10px;\n  & > div {\n    opacity: 1 !important;\n  }\n  .distributes-color,\n  .distributes-size {\n    padding: 5px 10px !important;\n    border-radius: 8px !important;\n  }\n  .distribute-select {\n    box-shadow: 0 0 6px 0 rgb(0 0 0 / 15%) !important;\n    padding: 1em 1.5em !important;\n    label {\n      color: #999;\n      margin-bottom: 5px;\n    }\n    div:first-of-type {\n      button {\n        min-width: 70px;\n        white-space: nowrap;\n        border-radius: 8px !important;\n      }\n    }\n    .distribute-select-btn {\n      column-gap: 5px;\n      flex-wrap: wrap;\n    }\n    .distribute-select-btnFunction {\n      button {\n        width: 100px;\n        min-height: 35px;\n        border-radius: 8px !important;\n        &:first-child {\n          border: none !important;\n        }\n      }\n    }\n  }\n"])));function p(e){var t=e.allows_choose_distribute,i=Object(o.c)((function(e){return e.app.appTheme})),n=e.distributes,s=e.setNewDistribute,r=e.newDistribute,c=e.setNewSubDistribute,l=e.newSubDistribute,u=e.handleChangeDistribute,a=e.distributes_selected,b=(e.isShowDistribute,e.product);return console.log(b),n&&n.length>0?Object(_.jsxs)(m,{className:"distributes",children:[a.map((function(e,t){return Object(_.jsx)("div",{children:e.name?Object(_.jsx)("div",{style:{background:i.color_main_1},className:"distributes-color",children:"".concat(e.name,": ").concat(e.value)}):null},t)})),a&&a.length>0&&a[0]&&a[0].sub_element_distributes&&Object(_.jsx)("div",{className:"distributes-size",style:{background:i.color_main_1},children:"".concat(n[0].sub_element_distribute_name,": \n                      ").concat(a[0].sub_element_distributes)}),!0===t&&Object(_.jsxs)("button",{style:{color:i.color_main_1},onClick:e.onShowDistribute,children:[0!=(null===a||void 0===a?void 0:a.length)&&n?"Thay \u0111\u1ed5i":"Ch\u1ecdn ph\xe2n lo\u1ea1i"," "]}),((null===a||void 0===a?void 0:a.length)>0||!a||0==(null===a||void 0===a?void 0:a.length))&&Object(_.jsxs)("div",{className:"distribute-select ".concat(e.isShowDistribute?"active":""),children:[Object(_.jsx)("label",{children:n[0].name?"".concat(n[0].name,":"):null}),Object(_.jsx)("div",{className:"row distribute-select-btn",children:n[0].element_distributes.map((function(e,t){return Object(_.jsx)("button",{onClick:function(){return s(e.name)},style:e.name===r?{backgroundColor:"white",borderColor:i.color_main_1,color:i.color_main_1}:{backgroundColor:"white"},children:e.name},t)}))}),n[0].sub_element_distribute_name&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("label",{children:n[0].sub_element_distribute_name}),Object(_.jsx)("div",{className:"row",children:n[0].element_distributes[0].sub_element_distributes.map((function(t,n){return Object(_.jsx)("button",{onClick:function(){e.setNewSubDistribute(t.name),c(t.name)},style:t.name===l?{backgroundColor:i.color_main_1,color:"white"}:{},children:t.name},n)}))})]}),Object(_.jsxs)("div",{className:"distribute-select-btnFunction",style:{marginTop:"1em",display:"flex",justifyContent:"space-between"},children:[Object(_.jsx)("button",{onClick:e.onShowDistribute,children:"H\u1ee7y"}),0==b.check_inventory||-1==Object(d.a)(b,r,l)||Object(d.a)(b,r,l)>0?Object(_.jsx)("button",{onClick:u,style:{background:i.color_main_1,color:"white",opacity:"0.8"},children:"X\xe1c nh\u1eadn"}):Object(_.jsx)("button",{style:{background:"grey",color:"white",opacity:"0.8"},children:"H\u1ebft h\xe0ng"})]})]})]}):Object(_.jsx)("div",{})}var j,h=i(347),v=b.a.div(j||(j=Object(c.a)(["\n  .btn-calculator {\n    border-radius: 8px !important;\n    button {\n      cursor: pointer;\n    }\n  }\n  .item-info {\n    align-items: center;\n    padding-left: 10px;\n  }\n  .delete-btn {\n    cursor: pointer;\n    padding-left: 10px;\n  }\n  .image {\n    .img-container {\n      border-radius: 10px;\n      img {\n        border-radius: 10px;\n      }\n    }\n  }\n  &.item-bonus {\n    padding-left: 80px !important;\n    .image {\n      width: 66px !important;\n    }\n    .item__bonus {\n      display: inline-block;\n      font-size: 12px;\n      color: #3498db;\n      padding: 5px 8px;\n      border-radius: 5px;\n      background-color: rgba(52, 152, 219, 0.1);\n      margin-right: 5px;\n      margin-bottom: 2px;\n    }\n  }\n\n  @media screen and (max-width: 400px) {\n    .item-info {\n    }\n  }\n"])));function g(e){var t,i,n,c,d=e.is_bonus,b=e.allows_choose_distribute,m=e.distributes_selected,j=e.product,g=j.price,f=j.product_discount,x=j.quantity_in_stock,O=j.quantity_in_stock_with_distribute,y=j.images,w=j.id,N=j.name,k=j.distributes,S=j.check_inventory;x=x>=0?x:-1===x?999999:0;var C=g,D="/img/default_product.jpg";if(console.log("@@",null===y||void 0===y||null===(t=y[0])||void 0===t?void 0:t.image_url),D=null!==(i=null===y||void 0===y||null===(n=y[0])||void 0===n?void 0:n.image_url)&&void 0!==i?i:"/img/default_product.jpg",k.length>0){var q,P,T,I,U=k[0],A=U.element_distributes.find((function(e){var t,i;return e.name==(null===m||void 0===m||null===(t=m[0])||void 0===t?void 0:t.value)&&U.name==(null===m||void 0===m||null===(i=m[0])||void 0===i?void 0:i.name)}));if(console.log("distributeSelected",A),A)D=(null===A||void 0===A?void 0:A.image_url)||(null!==(q=null===y||void 0===y||null===(P=y[0])||void 0===P?void 0:P.image_url)&&void 0!==q?q:"/img/default_product.jpg");else D=null!==(T=null===y||void 0===y||null===(I=y[0])||void 0===I?void 0:I.image_url)&&void 0!==T?T:"/img/default_product.jpg"}f&&(g=f.discount_price);var E=e.quantity,H=Object(l.useState)(e.quantity),z=Object(r.a)(H,2),G=z[0],B=z[1],Q=Object(l.useState)(e.note),L=Object(r.a)(Q,2),F=L[0],J=L[1],M=Object(l.useState)(!1),Y=Object(r.a)(M,2),K=Y[0],X=Y[1],R=e.distributes_selected,V=Object(o.c)((function(e){return e.app.appTheme})),W=Object(o.c)((function(e){return e.cart.cartInfo})),Z=Object(o.c)((function(e){return e.user.badges})),$=Object(l.useState)(e.distributes_selected&&e.distributes_selected[0]?e.distributes_selected[0].value:""),ee=Object(r.a)($,2),te=ee[0],ie=ee[1],ne=Object(l.useState)(e.distributes_selected&&e.distributes_selected[0]?e.distributes_selected[0].sub_element_distributes:""),se=Object(r.a)(ne,2),re=se[0],ce=se[1],le=Object(h.a)(G,500);function oe(t,i,n){var r=e.product.distributes;if(null==r||0==r.length)return O;if(null!=n){var c,l=Object(s.a)(r[0].element_distributes);try{for(l.s();!(c=l.n()).done;){var o=c.value;if(o.name==i){var u,a=Object(s.a)(o.sub_element_distributes);try{for(a.s();!(u=a.n()).done;){var d=u.value;if(d.name==n)return d.quantity_in_stock}}catch(p){a.e(p)}finally{a.f()}}}}catch(p){l.e(p)}finally{l.f()}}if(null!=i){var b,_=Object(s.a)(r[0].element_distributes);try{for(_.s();!(b=_.n()).done;){var m=b.value;if(m.name==i)return m.quantity_in_stock}}catch(p){_.e(p)}finally{_.f()}}return O}Object(l.useEffect)((function(){le!=E&&0!=le&&e.changeQuantity({line_item_id:e.line_item_id,product_id:w,quantity:G,distributes:e.distributes_selected,is_order_for_customer:e.is_order_for_customer})}),[le]);var ue=Object(o.b)();return console.log(W,e.quantity,G),0===(null!==(c=W.line_items)&&void 0!==c?c:[]).length?Object(_.jsxs)("div",{className:"_1fP0AH _2tKeYb",children:[Object(_.jsx)("div",{className:"_1g-4gk"}),Object(_.jsx)("div",{className:"h9wsC4",children:"Gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n c\xf2n tr\u1ed1ng!"}),Object(_.jsx)("a",{className:"_35zxc9",href:"/",children:Object(_.jsx)("button",{className:"shopee-button-solid",style:{background:V.color_main_1},children:Object(_.jsx)("span",{className:"_3SCpTT",children:"MUA NGAY"})})})]}):Object(_.jsxs)(v,{className:"cart-item ".concat(!0===d?"item-bonus":""),children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("div",{className:"img-container",children:Object(_.jsx)("img",{src:D,alt:"product1",style:{background:"url(../img/default_product.jpg)",backgroundSize:"contain"}})})}),Object(_.jsxs)("div",{className:"item-info",children:[Object(_.jsxs)("div",{style:{width:"35%"},children:[Object(_.jsxs)("a",{href:"/san-pham/"+w,className:"name",children:[!0===d&&Object(_.jsx)("span",{className:"item__bonus",children:"Qu\xe0 t\u1eb7ng"}),Object(_.jsx)("span",{children:N})]}),d?null:Object(_.jsx)("div",{style:{marginLeft:"1em",marginTop:"4px",color:"gray",fontSize:"12px"},children:K?Object(_.jsxs)("div",{style:{marginTop:"5px",display:"flex",alignItems:"center",columnGap:"5px",borderBottom:"1px solid #dadbdb",paddingBottom:"3px"},children:[Object(_.jsx)("div",{style:{width:"100%"},children:Object(_.jsx)("input",{style:{color:"gray",width:"100%"},type:"text",value:F,onChange:function(e){var t=e.target.value;J(t)},placeholder:"Th\xeam ghi ch\xfa"})}),Object(_.jsxs)("div",{className:"iconInputConfirm",style:{display:"flex",alignItems:"center",columnGap:"4px"},children:[Object(_.jsx)("span",{style:{color:"#2ecc71",cursor:"pointer"},onClick:function(){e.changeQuantity({line_item_id:e.line_item_id,product_id:w,quantity:e.quantity,distributes:e.distributes_selected,code_voucher:"",is_order_for_customer:e.is_order_for_customer,note:F}),X(!1)},children:Object(_.jsx)("i",{className:"fa fa-check"})}),Object(_.jsx)("span",{style:{color:"#e74c3c",cursor:"pointer"},onClick:function(){X(!1),J("")},children:Object(_.jsx)("i",{className:"fa fa-times"})})]})]}):Object(_.jsx)("div",{children:Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px",cursor:"pointer"},onClick:function(){return function(e){J(e),X(!0)}(e.note)},children:[Object(_.jsx)("i",{style:{fontSize:"10px"},className:"fas fa-pencil-alt"}),Object(_.jsx)("span",{children:F||"Th\xeam ghi ch\xfa"})]})})})]}),!0===d?Object(_.jsxs)("div",{className:"price",style:{marginTop:"0"},children:[Object(_.jsx)("div",{className:"current-price",style:{color:V.color_main_1,fontSize:"14px"},children:"Mi\u1ec5n ph\xed"}),C!==g&&e.before_discount_price>0&&Object(_.jsx)("div",{className:"past-price",children:Object(u.e)(e.before_discount_price)})]}):Object(_.jsxs)("div",{className:"price",style:{visibility:!0===d?"hidden":""},children:[Object(_.jsx)("div",{className:"current-price",style:{color:V.color_main_1},children:e.item_price>0?"".concat(Object(u.e)(e.item_price)):"Li\xean h\u1ec7"}),C!==g&&e.before_discount_price>0&&Object(_.jsx)("div",{className:"past-price",children:Object(u.e)(e.before_discount_price)})]}),d?Object(_.jsxs)("div",{children:[Object(_.jsxs)("span",{style:{color:"#757575"},children:["S\u1ed1 l\u01b0\u1ee3ng:"," "]}),Object(_.jsx)("span",{children:e.quantity})]}):Object(_.jsxs)("div",{className:"row btn-calculator",children:[Object(_.jsx)("button",{onClick:function(){return!1===d&&(e.setCheckBox(!1),void(G-1>=1&&B(G-1)))},checked:e.is_use_balance_collaborator,children:"-"}),Object(_.jsx)("input",{type:"number",value:1==d?e.quantity:G,style:{width:1==(null!==G&&void 0!==G?G:0).toString().length?55:2==(null!==G&&void 0!==G?G:0).toString().length?60:3==(null!==G&&void 0!==G?G:0).toString().length||4==(null!==G&&void 0!==G?G:0).toString().length?75:5==(null!==G&&void 0!==G?G:0).toString().length?80:6==(null!==G&&void 0!==G?G:0).toString().length?85:20*(null!==G&&void 0!==G?G:0).toString().length},min:0,onChange:function(t){return!1===d&&function(t){var i;if(""===t.target.value)B("");else if("0"==t.target.value)i=1,ue({type:a.constants.CHANGE_POPUP,popupType:a.constants.AUTOHIDE_POPUP,messageInfo:"S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng h\u1ee3p l\u1ec7"});else{i=parseInt(t.target.value);var n,s,r,c=O;null!==e.distributes_selected&&(c=oe(null===(n=e.distributes_selected[0])||void 0===n||n.name,null===(s=e.distributes_selected[0])||void 0===s?void 0:s.value,null===(r=e.distributes_selected[0])||void 0===r?void 0:r.sub_element_distributes)),i>c&&-1!=c&&1==S&&!Z.allow_semi_negative&&(i=c,ue({type:a.constants.CHANGE_POPUP,popupType:a.constants.AUTOHIDE_POPUP,messageInfo:"\u0110\xe3 v\u01b0\u1ee3t qu\xe1 s\u1ed1 l\u01b0\u1ee3ng trong kho!"}))}B(i)}(t)}}),Object(_.jsx)("button",{onClick:function(){return!1===d&&function(){e.setCheckBox(!1);var t,i,n,s=oe();null!==e.distributes_selected&&(s=oe(null===(t=e.distributes_selected[0])||void 0===t||t.name,null===(i=e.distributes_selected[0])||void 0===i?void 0:i.value,null===(n=e.distributes_selected[0])||void 0===n?void 0:n.sub_element_distributes)),-1==s||G+1<=s||0==S||Z.allow_semi_negative?B(G+1):ue({type:a.constants.CHANGE_POPUP,popupType:a.constants.AUTOHIDE_POPUP,messageInfo:"\u0110\xe3 v\u01b0\u1ee3t qu\xe1 s\u1ed1 l\u01b0\u1ee3ng trong kho!"})}()},children:"+"})]}),!0===d?Object(_.jsx)("button",{className:"delete-btn",style:{marginTop:"0.7em"},children:Object(_.jsx)("img",{src:"./img/gift-48.png",alt:"gift",style:{width:"35px"}})}):Object(_.jsx)("button",{className:"delete-btn",onClick:function(){e.changeQuantity({quantity:0,product_id:w,code_voucher:"",is_order_for_customer:e.is_order_for_customer,line_item_id:e.line_item_id,distributes:e.distributes_selected}),B(0)},children:Object(_.jsx)("i",{className:"fa fa-trash-alt"})})]})]}),Object(_.jsx)(p,{allows_choose_distribute:b,product:e.product,isShowDistribute:e.isShowDistribute,handleChangeDistribute:function(){var t,i,n;R.value===te&&R.sub_element_distributes===re||(e.onShowDistribute(),e.changeQuantity({line_item_id:e.line_item_id,product_id:w,is_order_for_customer:e.is_order_for_customer,quantity:G,distributes:[{name:null!==(t=null===(i=e.distributes_selected[0])||void 0===i?void 0:i.name)&&void 0!==t?t:null===(n=e.product.distributes[0])||void 0===n?void 0:n.name,value:te,sub_element_distributes:re}]}))},onShowDistribute:e.onShowDistribute,distributes:k,setNewDistribute:ie,newDistribute:te,setNewSubDistribute:ce,newSubDistribute:re,distributes_selected:e.distributes_selected})]})}},831:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n="HAS_SUB",s="HAS_ELE",r="NO_ELE_SUB",c=function(e,t,i){var c=function(e){if(null!=e.distributes&&e.distributes.length>0){var t=e.distributes[0];if(null!=t&&null!=t.element_distributes&&t.element_distributes.length>0){var i=t.element_distributes;return null!=i[0].sub_element_distributes&&i[0].sub_element_distributes.length>0?n:s}}return r}(e);if(c==r)return e.quantity_in_stock;if(c==s){var l,o=(l=e.distributes)[0].element_distributes.find((function(e){return e.name==t}));if(null!=o)return o.quantity_in_stock}if(c==n&&(l=e.distributes)[0].element_distributes.length>0){var u=l[0].element_distributes.find((function(e){return e.name==t}));if(null!=u){var a=u.sub_element_distributes.find((function(e){return e.name==i}));if(null!=a)return a.quantity_in_stock}}return null}}}]);