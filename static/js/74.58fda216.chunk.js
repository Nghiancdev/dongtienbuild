(this.webpackJsonpsaha_web=this.webpackJsonpsaha_web||[]).push([[74],{1069:function(e,t,n){"use strict";n.r(t);var a,c=n(20),s=n(3),r=n(6),i=n(10),o=n(2),l=n.n(o),d=n(4),h=n(7),j=n(1),b=n(31),m=(n(195),n(56)),u=n(11),_=n(58),p=n.n(_),O=n(94),x=n(0),f=l.a.lazy((function(){return Promise.resolve().then(n.bind(null,128))})),g=l.a.lazy((function(){return n.e(75).then(n.bind(null,979))})),y=l.a.lazy((function(){return Promise.resolve().then(n.bind(null,49))})),N=l.a.lazy((function(){return Promise.resolve().then(n.bind(null,117))})),v=u.a.div(a||(a=Object(i.a)(["\n  .search-bar {\n    flex-wrap: wrap;\n  }\n"])));t.default=function(){var e=Object(d.b)(),t=Object(o.useState)("Tr\u1ea1ng th\xe1i"),n=Object(r.a)(t,2),a=n[0],i=n[1],u=Object(o.useState)({date_from:p()(new Date).format("YYYY-MM-DD"),date_to:p()(new Date).format("YYYY-MM-DD")}),_=Object(r.a)(u,2),T=_[0],w=_[1],P=Object(o.useState)(""),D=Object(r.a)(P,2),k=D[0],S=D[1],C=Object(d.c)((function(e){return e.cart.ordersList})),E=Object(d.c)((function(e){return e.app.appTheme}));function R(e){window.location.href="/don-hang/".concat(e)}function I(t){var n=Object(c.a)(Object.keys(t));console.log(n);var a=n.reduce((function(e,n){return"".concat(e).concat(n,"=").concat(t[n],"&")}),"?");console.log(a),e({type:j.constants.RESET_ORDERS_LIST_STATUS}),e(b.a.getOrdersList(a))}return Object(o.useEffect)((function(){document.title="Danh s\xe1ch \u0111\u01a1n h\xe0ng",window.scrollTo({top:0,behavior:"smooth"}),I(T)}),[T]),Object(o.useEffect)((function(){w(Object(s.a)(Object(s.a)({},T),{},{search:k}))}),[k]),Object(x.jsx)(l.a.Fragment,{children:Object(x.jsxs)(l.a.Fragment,{children:[Object(x.jsxs)(v,{className:"orders-list-page container",children:[Object(x.jsxs)("div",{className:"sort-option row",style:{zIndex:"3"},children:[Object(x.jsxs)("div",{className:"row search-bar",children:[Object(x.jsxs)("div",{className:"search-bar-order",onKeyDown:function(e){"Enter"===e.key&&w({search:k})},children:[Object(x.jsx)("input",{className:"input-order",type:"text",placeholder:"M\xe3 \u0111\u01a1n h\xe0ng...",value:k,onChange:function(e){S(e.target.value)}}),Object(x.jsx)("button",{className:"button-order",onClick:function(){I(T)},children:Object(x.jsx)("i",{className:"fas fa-search"})})]}),Object(x.jsx)("div",{style:{marginTop:6},children:Object(x.jsx)(m.a,{onChangeDate:function(e){var t=e.split("&"),n=t[0].replace("?","").split("="),a=t[1].replace("?","").split("=")[1],c=n[1],r=Object(s.a)(Object(s.a)({},T),{},{date_from:c,date_to:a});w(r)},hideText:!0})})]}),Object(x.jsx)(f,{placeholder:a,handleSelect:function(e,t){var n=Object(s.a)({},T),r=Object(c.a)(Object.keys(e));Object(h.i)(t);for(var o=0;o<r.length;o++)if("title"!==r[o])n[r[o]]=e[r[o]];else{if(a===e.title)return;i(e.title),n.page=1}w(n)},showDetail:function(e){return Object(h.p)(e,200)},values:[{title:"T\u1ea5t c\u1ea3",field_by:"",field_by_value:""}].concat(Object(c.a)(O.a))})]}),C.status===j.constants.LOADING?null:Object(x.jsxs)("div",{children:[Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"order-id",children:"M\xe3 \u0111\u01a1n h\xe0ng"}),Object(x.jsx)("th",{className:"date",children:"Th\u1eddi gian"}),Object(x.jsx)("th",{className:"n-product",children:"S\u1ea3n ph\u1ea9m"}),Object(x.jsx)("th",{className:"total",children:"T\u1ed5ng ti\u1ec1n"}),Object(x.jsx)("th",{className:"status",children:"T.t \u0111\u01a1n h\xe0ng"}),Object(x.jsx)("th",{className:"status",children:"T.t thanh to\xe1n"})]})}),Object(x.jsx)("tbody",{children:C.data.map((function(t,n){return t.line_items_at_time.length>0&&Object(x.jsxs)("tr",{onClick:function(){return R(t.order_code)},children:[Object(x.jsx)("td",{className:"order-id",style:{minWidth:"160px"},children:t.order_code}),Object(x.jsx)("td",{className:"date",children:t.created_at.split(" ")[0]}),Object(x.jsxs)("td",{className:"n-product",children:[Object(x.jsx)("div",{children:t.line_items_at_time[0].name}),Object(x.jsx)("span",{children:t.line_items_at_time.length>1?"0".concat(t.line_items_at_time.length-1," s\u1ea3n ph\u1ea9m kh\xe1c"):null})]}),Object(x.jsxs)("td",{className:"total",children:[" ",Object(h.e)(t.total_final)]}),Object(x.jsx)("td",{className:"status",children:t.order_status_name}),Object(x.jsxs)("td",{className:"status",children:[t.payment_status_name,Object(x.jsx)("br",{}),"UNPAID"===t.payment_status_code&&["WAITING_FOR_PROGRESSING","PACKING"].includes(t.order_status_code)&&Object(x.jsx)("button",{onClick:function(n){!function(t,n){t.stopPropagation(),e({type:j.constants.CHANGE_POPUP,popupType:j.constants.ORDER_POPUP,orderPopupTitle:{title:"Thanh to\xe1n!",subTitle:"H\xe3y thanh to\xe1n ngay ho\u1eb7c thay \u0111\u1ed5i h\xecnh th\u1ee9c thanh to\xe1n."},paymentMethod:{payment_method_name:n.payment_method_name,payment_method_id:n.payment_method_id,order_code:n.order_code,payment_partner_name:n.payment_partner_name,payment_partner_id:n.payment_partner_id,orderInfo:n}})}(n,t)},style:{padding:"6px 8px",borderRadius:"0.25em",color:"white",marginTop:"0.5em",cursor:"pointer",background:E.color_main_1},children:"Thanh to\xe1n"}),"COMPLETED"===t.order_status_code&&t.line_items_at_time.length>0&&(t.reviewed?Object(x.jsxs)("a",{href:"/san-pham/".concat(t.line_items_at_time[0].id),children:[" ",Object(x.jsx)("button",{style:{padding:"6px 8px",borderRadius:"0.25em",color:"white",marginTop:"0.5em",background:E.color_main_1},children:"Mua l\u1ea1i"})," "]}):Object(x.jsx)("button",{style:{padding:"6px 8px",borderRadius:"0.25em",color:"white",marginTop:"0.5em",background:E.color_main_1},children:"\u0110\xe1nh gi\xe1"}))]})]},n)}))})]}),Object(x.jsx)("div",{className:"mobile",style:{display:"block"},children:C.data.map((function(e,t){return e.line_items_at_time.length>0&&Object(x.jsx)(g,{statusCode:e.order_status_code,onClick:R,orderCode:e.order_code,status:e.order_status_name,image:e.line_items_at_time[0].image_url,name:e.line_items_at_time[0].name,nItems:e.line_items_at_time.length,total:e.total_final},t)}))}),Object(x.jsx)(y,{handlePageSelect:function(e){I(Object(s.a)(Object(s.a)({},T),e))},currentPage:C.current_page,totalPage:C.last_page})]})]}),Object(x.jsx)(N,{})]})})}}}]);